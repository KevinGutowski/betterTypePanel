var that=this;function __skpm_run(t,e){that.context=e;var i=function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="./src/my-command.js")}({"./src/my-command.js":
/*!***************************!*\
  !*** ./src/my-command.js ***!
  \***************************/
/*! exports provided: default, selectionChanged */function(t,e,i){"use strict";i.r(e),i.d(e,"selectionChanged",function(){return p});var n=i(/*! sketch */"sketch"),a=i.n(n);COScript.currentCOScript().setShouldKeepAround_(!0);var r="com.betterTypePanel",o="com.betterTypePanel.popupButton.verticalPosition",s="com.betterTypePanel.radioButton.proportional",l="com.betterTypePanel.radioButton.monospaced",u="com.betterTypePanel.button.lowerCase",S="com.betterTypePanel.button.upperCase",c="com.betterTypePanel.radioButton.liningFigures",f="com.betterTypePanel.radioButton.oldStyle";function p(t){framework("CoreText"),NSThread.mainThread().threadDictionary()[r]&&h()}function N(t,e,i){t.setTranslatesAutoresizingMaskIntoConstraints(!1),d(NSLayoutAttributeTop,t,e,i[0]),d(NSLayoutAttributeTrailing,t,e,i[1]),d(NSLayoutAttributeBottom,t,e,i[2]),d(NSLayoutAttributeLeading,t,e,i[3])}function d(t,e,i,n){i.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(e,t,NSLayoutRelationEqual,i,t,1,n))}function m(t){var e=t.text,i=t.frame,n=t.alignment,a=t.fontSize,r=void 0===a?13:a,o=NSTextField.alloc().initWithFrame(i);return o.setStringValue(e),o.setAlignment(n),o.setFont(NSFont.systemFontOfSize(r)),o.setBezeled(!1),o.setDrawsBackground(!1),o.setEditable(!1),o.setSelectable(!1),o}function b(t){var e=a.a.getSelectedDocument(),i=!1;e.selectedLayers.layers.filter(function(t){return"Text"==t.type}).forEach(function(e){var n=e.sketchObject.font(),a=n.pointSize(),r=(n.fontDescriptor().fontAttributes()[NSFontFeatureSettingsAttribute],n.fontDescriptor().fontDescriptorByAddingAttributes(t)),o=NSFont.fontWithDescriptor_size(r,a);if(e.sketchObject.setFont(o),1==e.sketchObject.isEditingText()){var s=e.sketchObject.editingDelegate().textView();s.setFont(o),s.didChangeText(),i=!0}}),i&&a.a.UI.message("ðŸ‘‹ Substring styling is currently unsupported. Style applied to the whole text object instead."),e.sketchObject.inspectorController().reload(),h()}function y(t,e){var i=NSFont.boldSystemFontOfSize(13),n=g(t,e),a=(i.fontDescriptor().fontAttributes()[NSFontFeatureSettingsAttribute],i.fontDescriptor().fontDescriptorByAddingAttributes(n));return NSFont.fontWithDescriptor_size(a,13)}function g(t,e){return{[NSFontFeatureSettingsAttribute]:[{[NSFontFeatureTypeIdentifierKey]:t,[NSFontFeatureSelectorIdentifierKey]:e}]}}function h(){var t=a.a.getSelectedDocument().selectedLayers.layers,e=NSThread.mainThread().threadDictionary();if(null!=t){var i=t.filter(function(t){return"Text"==t.type});if(0!=i.length){i[0].sketchObject.font().fontDescriptor().fontAttributes()[NSFontFeatureSettingsAttribute];var n,r=[];i.forEach(function(t){var e=t.sketchObject.font().fontDescriptor().fontAttributes()[NSFontFeatureSettingsAttribute];r.push(e)});for(var p=!0,N=0;N<r.length;N++)if(null!=r[N]){p=!1;break}for(var d in n=p?{verticalPosition:["default"],numberSpacing:["proportional"],numberCase:["lining"],smallCapsLowerCase:[!1],smallCapsUpperCase:[!1]}:function(t,e){for(var i={verticalPosition:[],numberSpacing:[],numberCase:[],smallCapsLowerCase:[],smallCapsUpperCase:[]},n=function(){var n=e();for(r in null!=t[a]&&t[a].forEach(function(t){var e=t[NSFontFeatureTypeIdentifierKey],i=t[NSFontFeatureSelectorIdentifierKey];10==e&&(0==i?n.verticalPosition="default":1==i?n.verticalPosition="superscript":2==i?n.verticalPosition="subscript":3==i?n.verticalPosition="ordinals":4==i&&(n.verticalPosition="scientific inferiors")),6==e&&(0==i?n.numberSpacing="monospaced":1==i&&(n.numberSpacing="proportional")),21==e&&(0==i?n.numberCase="oldStyle":1==i&&(n.numberCase="lining")),37==e&&(0==i?n.smallCapsLowerCase=!1:1==i&&(n.smallCapsLowerCase=!0)),38==e&&(0==i?n.smallCapsUpperCase=!1:1==i&&(n.smallCapsUpperCase=!0))}),n)i[r].push(n[r])},a=0;a<t.length;a++){var r;n()}for(var o in i)i[o]=i[o].filter(s);function s(t,e,i){return i.indexOf(t)===e}return i}(r,v))if("verticalPosition"==d)!function(){var t=e[o];t.setEnabled(!0),k(),n[d].length>1?(t.selectItemWithTitle("Multiple"),n[d].forEach(function(e){"default"==e?t.itemWithTitle("Default Position").setState(NSControlStateValueMixed):"superscript"==e?t.itemWithTitle("Superscript").setState(NSControlStateValueMixed):"subscript"==e?t.itemWithTitle("Subscript").setState(NSControlStateValueMixed):"ordinals"==e?t.itemWithTitle("Ordinals").setState(NSControlStateValueMixed):"scientific inferiors"==e&&t.itemWithTitle("Scientific Notation").setState(NSControlStateValueMixed)})):"default"==n[d][0]?(t.selectItemWithTitle("Default Position"),t.itemWithTitle("Default Position").setState(NSControlStateValueOn)):"superscript"==n[d][0]?(t.selectItemWithTitle("Superscript"),t.itemWithTitle("Superscript").setState(NSControlStateValueOn)):"subscript"==n[d][0]?(t.selectItemWithTitle("Subscript"),t.itemWithTitle("Subscript").setState(NSControlStateValueOn)):"ordinals"==n[d][0]?(t.selectItemWithTitle("Ordinals"),t.itemWithTitle("Ordinals").setState(NSControlStateValueOn)):"scientific inferiors"==n[d][0]&&(t.selectItemWithTitle("Scientific Notation"),t.itemWithTitle("Scientific Notation").setState(NSControlStateValueOn))}();else if("numberSpacing"==d){var m=e[s],b=e[l];m.setEnabled(!0),b.setEnabled(!0),n[d].length>1?(m.setState(NSOffState),b.setState(NSOffState)):"proportional"==n[d][0]?(m.setState(NSOnState),b.setState(NSOffState)):"monospaced"==n[d][0]&&(m.setState(NSOffState),b.setState(NSOnState))}else if("numberCase"==d){var y=e[c],g=e[f];y.setEnabled(!0),g.setEnabled(!0),n[d].length>1?(y.setState(NSOffState),g.setState(NSOffState)):"lining"==n[d][0]?(y.setState(NSOnState),g.setState(NSOffState)):"oldStyle"==n[d][0]&&(y.setState(NSOffState),g.setState(NSOnState))}else if("smallCapsUpperCase"==d){var h=e[S];h.setEnabled(!0),n[d].length>1?h.setState(NSOffState):0==n[d][0]?h.setState(NSOffState):1==n[d][0]&&h.setState(NSOnState)}else if("smallCapsLowerCase"==d){var T=e[u];T.setEnabled(!0),n[d].length>1?T.setState(NSOffState):0==n[d][0]?T.setState(NSOffState):1==n[d][0]&&T.setState(NSOnState)}else n[d]}else C(e)}else C(e)}function C(t){t[o].setEnabled(!1);var e=t[s],i=t[l];e.setEnabled(!1),i.setEnabled(!1);var n=t[c],a=t[f];n.setEnabled(!1),a.setEnabled(!1),t[S].setEnabled(!1),t[u].setEnabled(!1)}function T(t,e,i){t.close(),e.removeObjectForKey(i),e.panelOpen=!1,COScript.currentCOScript().setShouldKeepAround_(!1)}function v(){return{verticalPosition:"default",numberSpacing:"proportional",numberCase:"lining",smallCapsLowerCase:!1,smallCapsUpperCase:!1}}function k(){var t=NSThread.mainThread().threadDictionary()[o];t.itemWithTitle("Default Position").setState(NSControlStateValueOff),t.itemWithTitle("Superscript").setState(NSControlStateValueOff),t.itemWithTitle("Subscript").setState(NSControlStateValueOff),t.itemWithTitle("Ordinals").setState(NSControlStateValueOff),t.itemWithTitle("Scientific Notation").setState(NSControlStateValueOff)}e.default=function(){!function(){var t=NSThread.mainThread().threadDictionary();t[r]?T(t[r],t,r):(t.panelOpen=!0,function(t,e){var i=NSPanel.alloc().init();i.setFrame_display(NSMakeRect(0,0,312,210),!0),i.setStyleMask(NSTexturedBackgroundWindowMask|NSTitledWindowMask|NSClosableWindowMask),i.title="BetterTypePanel",i.center(),i.makeKeyAndOrderFront(null),i.setLevel(NSFloatingWindowLevel),i.standardWindowButton(NSWindowMiniaturizeButton).setHidden(!0),i.standardWindowButton(NSWindowZoomButton).setHidden(!0);var n=m({text:"Number Position:",frame:NSMakeRect(0,0,109,17),alignment:NSTextAlignmentRight});n.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(n,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,109));var a=NSPopUpButton.alloc().initWithFrame(NSMakeRect(0,0,150,25));a.addItemsWithTitles(["Default Position","Superscript","Subscript","Ordinals","Scientific Notation","Multiple"]),t[o]=a,a.itemWithTitle("Multiple").setHidden(!0);a.setCOSJSTargetFunction(function(t){return function(t){if("Superscript"==t.title()){var e=g(kVerticalPositionType,kSuperiorsSelector);b(e)}else if("Subscript"==t.title()){var i=g(kVerticalPositionType,kInferiorsSelector);b(i)}else if("Ordinals"==t.title()){var n=g(kVerticalPositionType,kOrdinalsSelector);b(n)}else if("Scientific Notation"==t.title()){var a=g(kVerticalPositionType,kScientificInferiorsSelector);b(a)}else{var r=g(kVerticalPositionType,kNormalPositionSelector);b(r)}}(t)});var r=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,284,25));r.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),r.setAlignment(NSLayoutAttributeFirstBaseline),r.setSpacing(4),r.setViews_inGravity([n,a],NSStackViewGravityLeading);var p=m({text:"Number Spacing:",frame:NSMakeRect(0,0,109,17),alignment:NSTextAlignmentRight});p.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(p,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,109));var d=NSButton.alloc().initWithFrame(NSMakeRect(0,0,97,18));d.setButtonType(NSRadioButton),d.setTitle("Proportional"),d.setState(NSOnState),t[s]=d;var h=NSButton.alloc().initWithFrame(NSMakeRect(0,0,150,18));h.setButtonType(NSRadioButton),h.setTitle("Monospaced/Tabular"),h.setState(NSOffState),t[l]=h;var C=function(t){if("Proportional"==t.title()){var e=g(kNumberSpacingType,kProportionalNumbersSelector);b(e)}else{var i=g(kNumberSpacingType,kMonospacedNumbersSelector);b(i)}};d.setCOSJSTargetFunction(function(t){return C(t)}),h.setCOSJSTargetFunction(function(t){return C(t)});var v=NSStackView.stackViewWithViews([d,h]);v.setOrientation(NSUserInterfaceLayoutOrientationVertical),v.setAlignment(NSLayoutAttributeLeading),v.setSpacing(4),v.setTranslatesAutoresizingMaskIntoConstraints(!1);var k=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,284,36));k.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),k.setAlignment(NSLayoutAttributeFirstBaseline),k.setSpacing(4),k.setViews_inGravity([p,v],NSStackViewGravityLeading);var O=m({text:"Number Case:",frame:NSMakeRect(0,0,109,17),alignment:NSTextAlignmentRight});O.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(O,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,109));var A=NSButton.alloc().initWithFrame(NSMakeRect(0,0,104,17));A.setButtonType(NSRadioButton),A.setTitle("Lining figures"),A.setState(NSOnState),t[c]=A;var L=NSButton.alloc().initWithFrame(NSMakeRect(0,0,124,18));L.setButtonType(NSRadioButton),L.setTitle("Old-style figures"),L.setState(NSOffState),t[f]=L;var _=function(t){if("Old-style figures"==t.title()){var e=g(kNumberCaseType,kLowerCaseNumbersSelector);b(e)}else{var i=g(kNumberCaseType,kUpperCaseNumbersSelector);b(i)}};A.setCOSJSTargetFunction(function(t){return _(t)}),L.setCOSJSTargetFunction(function(t){return _(t)});var W=NSStackView.stackViewWithViews([A,L]);W.setOrientation(NSUserInterfaceLayoutOrientationVertical),W.setAlignment(NSLayoutAttributeLeading),W.setSpacing(4),W.setTranslatesAutoresizingMaskIntoConstraints(!1);var w=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,284,36));w.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),w.setAlignment(NSLayoutAttributeFirstBaseline),w.setSpacing(4),w.setViews_inGravity([O,W],NSStackViewGravityLeading);var F=m({text:"Small Caps:",frame:NSMakeRect(0,0,109,17),alignment:NSTextAlignmentRight});F.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(F,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,109));var V=m({text:"Tt â†’",frame:NSMakeRect(0,0,32,17),alignment:NSTextAlignmentLeft}),B=NSButton.alloc().initWithFrame(NSMakeRect(0,0,72,32));B.setButtonType(NSButtonTypeOnOff),B.setBezelStyle(NSRoundedBezelStyle);var M=NSMutableAttributedString.new().initWithString("Tt"),P=NSMakeRange(1,1),I=y(37,1);M.setAlignment_range(NSTextAlignmentCenter,NSMakeRange(0,2)),M.addAttribute_value_range(NSFontAttributeName,I,P),B.setAttributedTitle(M),B.setState(NSOffState),B.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(B,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,60)),t[u]=B;B.setCOSJSTargetFunction(function(t){return function(t){if(0==t.state()){var e=g(kLowerCaseType,kDefaultLowerCaseSelector);b(e)}else{var i=g(kLowerCaseType,kLowerCaseSmallCapsSelector);b(i)}}(t)});var R=m({text:"Lower Case",frame:NSMakeRect(0,0,65,14),alignment:NSTextAlignmentCenter,fontSize:11}),x=NSStackView.stackViewWithViews([B,R]);x.setOrientation(NSUserInterfaceLayoutOrientationVertical),x.setAlignment(NSLayoutAttributeCenterX),x.setSpacing(4),x.setTranslatesAutoresizingMaskIntoConstraints(!1);var D=NSButton.alloc().initWithFrame(NSMakeRect(0,0,72,32));D.setButtonType(NSButtonTypeOnOff),D.setBezelStyle(NSRoundedBezelStyle);var E=NSMutableAttributedString.new().initWithString("Tt"),z=NSMakeRange(0,1),U=y(38,1);E.setAlignment_range(NSTextAlignmentCenter,NSMakeRange(0,2));NSMutableParagraphStyle.new().init().setAlignment(NSTextAlignmentCenter);E.addAttribute_value_range(NSFontAttributeName,U,z),D.setAttributedTitle(E),D.setState(NSOffState),D.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(D,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,60)),t[S]=D;D.setCOSJSTargetFunction(function(t){return function(t){if(0==t.state()){var e=g(kUpperCaseType,kDefaultUpperCaseSelector);b(e)}else{var i=g(kUpperCaseType,kUpperCaseSmallCapsSelector);b(i)}}(t)});var j=m({text:"Upper Case",frame:NSMakeRect(0,0,66,14),alignment:NSTextAlignmentCenter,fontSize:11}),H=NSStackView.stackViewWithViews([D,j]);H.setOrientation(NSUserInterfaceLayoutOrientationVertical),H.setSpacing(4),H.setTranslatesAutoresizingMaskIntoConstraints(!1);var K=NSStackView.stackViewWithViews([V,x,H]);K.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),K.setAlignment(NSLayoutAttributeFirstBaseline),K.setSpacing(4),K.setTranslatesAutoresizingMaskIntoConstraints(!1);var q=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,284,36));q.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),q.setAlignment(NSLayoutAttributeFirstBaseline),q.setSpacing(4),q.setViews_inGravity([F,K],NSStackViewGravityLeading);var G=NSStackView.stackViewWithViews([r,k,w,q]);G.setOrientation(NSUserInterfaceLayoutOrientationVertical),G.setAlignment(NSLayoutAttributeLeading),G.setSpacing(8),G.setTranslatesAutoresizingMaskIntoConstraints(!1),i.contentView().addSubview(G),i.contentView().setFlipped(!0),N(G,i.contentView(),[16,16,8,16]),t[e]=i,i.standardWindowButton(NSWindowCloseButton).setCOSJSTargetFunction(function(n){T(i,t,e)})}(t,r))}(),function(){var t=COScript.currentCOScript().env().scriptURL.path().stringByDeletingLastPathComponent().stringByDeletingLastPathComponent().stringByDeletingLastPathComponent().stringByDeletingLastPathComponent()+"/src",e=e||log;!function(){var e=Mocha.sharedRuntime(),i=t;!!e.valueForKey("HelloSketch")||!!e.loadFrameworkWithName_inDirectory("HelloSketch",i)&&e.setValue_forKey_(!0,"HelloSketch")}()}(),framework("CoreText"),h()}},sketch:
/*!*************************!*\
  !*** external "sketch" ***!
  \*************************/
/*! no static exports found */function(t,e){t.exports=require("sketch")}});"default"===t&&"function"==typeof i?i(e):i[t](e)}that.onRun=__skpm_run.bind(this,"default"),that.selectionChanged=__skpm_run.bind(this,"selectionChanged");