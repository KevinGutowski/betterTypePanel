var that=this;function __skpm_run(t,e){that.context=e;var n=function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./src/my-command.js")}({"./src/my-command.js":
/*!***************************!*\
  !*** ./src/my-command.js ***!
  \***************************/
/*! exports provided: default, selectionChanged */function(t,e,n){"use strict";n.r(e),n.d(e,"selectionChanged",function(){return p});var i=n(/*! sketch */"sketch"),a=n.n(i);COScript.currentCOScript().setShouldKeepAround_(!0);var r="com.betterTypePanel",o="com.betterTypePanel.popupButton.verticalPosition",s="com.betterTypePanel.radioButton.proportional",l="com.betterTypePanel.radioButton.monospaced",u="com.betterTypePanel.button.lowerCase",S="com.betterTypePanel.button.upperCase",c="com.betterTypePanel.radioButton.liningFigures",d="com.betterTypePanel.radioButton.oldStyle";function p(t){framework("CoreText"),NSThread.mainThread().threadDictionary()[r]&&k()}function N(t,e,n){t.setTranslatesAutoresizingMaskIntoConstraints(!1),f(NSLayoutAttributeTop,t,e,n[0]),f(NSLayoutAttributeTrailing,t,e,n[1]),f(NSLayoutAttributeBottom,t,e,n[2]),f(NSLayoutAttributeLeading,t,e,n[3])}function f(t,e,n,i){n.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(e,t,NSLayoutRelationEqual,n,t,1,i))}function m(t){var e=t.text,n=t.frame,i=t.alignment,a=t.fontSize,r=void 0===a?13:a,o=NSTextField.alloc().initWithFrame(n);return o.setStringValue(e),o.setAlignment(i),o.setFont(NSFont.systemFontOfSize(r)),o.setBezeled(!1),o.setDrawsBackground(!1),o.setEditable(!1),o.setSelectable(!1),o}function y(t){var e=a.a.getSelectedDocument(),n=e.selectedLayers.layers[0],i=n.sketchObject.font(),r=i.pointSize(),o=(i.fontDescriptor().fontAttributes()[NSFontFeatureSettingsAttribute],i.fontDescriptor().fontDescriptorByAddingAttributes(t)),s=NSFont.fontWithDescriptor_size(o,r);n.sketchObject.setFont(s),e.sketchObject.inspectorController().reload()}function b(t,e){var n=NSFont.boldSystemFontOfSize(13),i=g(t,e),a=(n.fontDescriptor().fontAttributes()[NSFontFeatureSettingsAttribute],n.fontDescriptor().fontDescriptorByAddingAttributes(i));return NSFont.fontWithDescriptor_size(a,13)}function g(t,e){return{[NSFontFeatureSettingsAttribute]:[{[NSFontFeatureTypeIdentifierKey]:t,[NSFontFeatureSelectorIdentifierKey]:e}]}}function k(){var t=a.a.getSelectedDocument().selectedLayers.layers[0],e=NSThread.mainThread().threadDictionary();if(t){var n=t.sketchObject.font(),i=(n.pointSize(),function(t,e){return t.forEach(function(t){var n=t[NSFontFeatureTypeIdentifierKey],i=t[NSFontFeatureSelectorIdentifierKey];10==n&&(0==i?e.verticalPosition="default":1==i?e.verticalPosition="superscript":2==i?e.verticalPosition="subscript":3==i?e.verticalPosition="ordinals":4==i&&(e.verticalPosition="scientific inferiors")),6==n&&(0==i?e.numberSpacing="monospaced":1==i&&(e.numberSpacing="proportional")),21==n&&(0==i?e.numberCase="oldStyle":1==i&&(e.numberCase="lining")),37==n&&(0==i?e.smallCapsLowerCase=!1:1==i&&(e.smallCapsLowerCase=!0)),38==n&&(0==i?e.smallCapsUpperCase=!1:1==i&&(e.smallCapsUpperCase=!0))}),e}(n.fontDescriptor().fontAttributes()[NSFontFeatureSettingsAttribute],{verticalPosition:"default",numberSpacing:"proportional",numberCase:"lining",smallCapsLowerCase:!1,smallCapsUpperCase:!1}));for(var r in i)if("verticalPosition"==r){var p=e[o];p.setEnabled(!0),"default"==i[r]?p.selectItemWithTitle("Default Position"):"superscript"==i[r]?p.selectItemWithTitle("Superscript"):"subscript"==i[r]?p.selectItemWithTitle("Subscript"):"ordinals"==i[r]?p.selectItemWithTitle("Ordinals"):"scientific inferiors"==i[r]&&p.selectItemWithTitle("Scientific Notation")}else if("numberSpacing"==r){var N=e[s],f=e[l];N.setEnabled(!0),f.setEnabled(!0),"proportional"==i[r]?(N.setState(NSOnState),f.setState(NSOffState)):"monospaced"==i[r]&&(N.setState(NSOffState),f.setState(NSOnState))}else if("numberCase"==r){var m=e[c],y=e[d];m.setEnabled(!0),y.setEnabled(!0),"lining"==i[r]?(m.setState(NSOnState),y.setState(NSOffState)):"oldStyle"==i[r]&&(m.setState(NSOffState),y.setState(NSOnState))}else if("smallCapsUpperCase"==r){var b=e[S];b.setEnabled(!0),0==i[r]?b.setState(NSOffState):1==i[r]&&b.setState(NSOnState)}else if("smallCapsLowerCase"==r){var g=e[u];g.setEnabled(!0),0==i[r]?g.setState(NSOffState):1==i[r]&&g.setState(NSOnState)}}else!function(t){t[o].setEnabled(!1);var e=t[s],n=t[l];e.setEnabled(!1),n.setEnabled(!1);var i=t[c],a=t[d];i.setEnabled(!1),a.setEnabled(!1),t[S].setEnabled(!1),t[u].setEnabled(!1)}(e)}e.default=function(){a.a.UI.message("It's alive ðŸ™Œ"),function(){var t=NSThread.mainThread().threadDictionary();if(t[r])return;t.panelOpen=!0,function(t,e){var n=NSPanel.alloc().init();n.setFrame_display(NSMakeRect(0,0,312,210),!0),n.setStyleMask(NSTexturedBackgroundWindowMask|NSTitledWindowMask|NSClosableWindowMask),n.title="betterTypePanel",n.center(),n.makeKeyAndOrderFront(null),n.setLevel(NSFloatingWindowLevel),n.standardWindowButton(NSWindowMiniaturizeButton).setHidden(!0),n.standardWindowButton(NSWindowZoomButton).setHidden(!0);var i=m({text:"Vertical Position:",frame:NSMakeRect(0,0,109,17),alignment:NSTextAlignmentRight});i.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(i,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,109));var a=NSPopUpButton.alloc().initWithFrame(NSMakeRect(0,0,150,25));a.addItemsWithTitles(["Default Position","Superscript","Subscript","Ordinals","Scientific Notation"]),t[o]=a;a.setCOSJSTargetFunction(function(t){return function(t){if("Superscript"==t.title()){var e=g(kVerticalPositionType,kSuperiorsSelector);y(e)}else if("Subscript"==t.title()){var n=g(kVerticalPositionType,kInferiorsSelector);y(n)}else if("Ordinals"==t.title()){var i=g(kVerticalPositionType,kOrdinalsSelector);y(i)}else if("Scientific Notation"==t.title()){var a=g(kVerticalPositionType,kOrdinalsSelector);y(a)}else{var r=g(kVerticalPositionType,kNormalPositionSelector);y(r)}}(t)});var r=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,284,25));r.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),r.setAlignment(NSLayoutAttributeFirstBaseline),r.setSpacing(4),r.setViews_inGravity([i,a],NSStackViewGravityLeading);var p=m({text:"Number Spacing:",frame:NSMakeRect(0,0,109,17),alignment:NSTextAlignmentRight});p.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(p,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,109));var f=NSButton.alloc().initWithFrame(NSMakeRect(0,0,97,18));f.setButtonType(NSRadioButton),f.setTitle("Proportional"),f.setState(NSOnState),t[s]=f;var k=NSButton.alloc().initWithFrame(NSMakeRect(0,0,150,18));k.setButtonType(NSRadioButton),k.setTitle("Monospaced/Tabular"),k.setState(NSOffState),t[l]=k;var v=function(t){if("Proportional"==t.title()){var e=g(kNumberSpacingType,kProportionalNumbersSelector);y(e)}else{var n=g(kNumberSpacingType,kMonospacedNumbersSelector);y(n)}};f.setCOSJSTargetFunction(function(t){return v(t)}),k.setCOSJSTargetFunction(function(t){return v(t)});var C=NSStackView.stackViewWithViews([f,k]);C.setOrientation(NSUserInterfaceLayoutOrientationVertical),C.setAlignment(NSLayoutAttributeLeading),C.setSpacing(4),C.setTranslatesAutoresizingMaskIntoConstraints(!1);var h=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,284,36));h.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),h.setAlignment(NSLayoutAttributeFirstBaseline),h.setSpacing(4),h.setViews_inGravity([p,C],NSStackViewGravityLeading);var A=m({text:"Number Case:",frame:NSMakeRect(0,0,109,17),alignment:NSTextAlignmentRight});A.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(A,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,109));var T=NSButton.alloc().initWithFrame(NSMakeRect(0,0,104,17));T.setButtonType(NSRadioButton),T.setTitle("Lining figures"),T.setState(NSOnState),t[c]=T;var O=NSButton.alloc().initWithFrame(NSMakeRect(0,0,124,18));O.setButtonType(NSRadioButton),O.setTitle("Old-style figures"),O.setState(NSOffState),t[d]=O;var L=function(t){if("Old-style figures"==t.title()){var e=g(kNumberCaseType,kLowerCaseNumbersSelector);y(e)}else{var n=g(kNumberCaseType,kUpperCaseNumbersSelector);y(n)}};T.setCOSJSTargetFunction(function(t){return L(t)}),O.setCOSJSTargetFunction(function(t){return L(t)});var _=NSStackView.stackViewWithViews([T,O]);_.setOrientation(NSUserInterfaceLayoutOrientationVertical),_.setAlignment(NSLayoutAttributeLeading),_.setSpacing(4),_.setTranslatesAutoresizingMaskIntoConstraints(!1);var w=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,284,36));w.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),w.setAlignment(NSLayoutAttributeFirstBaseline),w.setSpacing(4),w.setViews_inGravity([A,_],NSStackViewGravityLeading);var F=m({text:"Small Caps:",frame:NSMakeRect(0,0,109,17),alignment:NSTextAlignmentRight});F.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(F,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,109));var B=m({text:"Tt â†’",frame:NSMakeRect(0,0,32,17),alignment:NSTextAlignmentLeft}),W=NSButton.alloc().initWithFrame(NSMakeRect(0,0,72,32));W.setButtonType(NSButtonTypeOnOff),W.setBezelStyle(NSRoundedBezelStyle);var I=NSMutableAttributedString.new().initWithString("Tt"),V=NSMakeRange(1,1),R=b(37,1);I.addAttribute_value_range(NSFontAttributeName,R,V),I.fixAttributesInRange(V),W.setAttributedTitle(I),W.setState(NSOffState),W.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(W,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,60)),t[u]=W;W.setCOSJSTargetFunction(function(t){return function(t){if(0==t.state()){var e=g(kLowerCaseType,kDefaultLowerCaseSelector);y(e)}else{var n=g(kLowerCaseType,kLowerCaseSmallCapsSelector);y(n)}}(t)});var M=m({text:"Lower Case",frame:NSMakeRect(0,0,65,14),alignment:NSTextAlignmentCenter,fontSize:11}),P=NSStackView.stackViewWithViews([W,M]);P.setOrientation(NSUserInterfaceLayoutOrientationVertical),P.setAlignment(NSLayoutAttributeCenterX),P.setSpacing(4),P.setTranslatesAutoresizingMaskIntoConstraints(!1);var x=NSButton.alloc().initWithFrame(NSMakeRect(0,0,72,32));x.setButtonType(NSButtonTypeOnOff),x.setBezelStyle(NSRoundedBezelStyle);var z=NSMutableAttributedString.new().initWithString("Tt"),D=NSMakeRange(0,1),E=b(38,1);z.addAttribute_value_range(NSFontAttributeName,E,D),z.fixAttributesInRange(D),x.setAttributedTitle(z),x.setState(NSOffState),x.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(x,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,60)),t[S]=x;x.setCOSJSTargetFunction(function(t){return function(t){if(0==t.state()){var e=g(kUpperCaseType,kDefaultUpperCaseSelector);y(e)}else{var n=g(kUpperCaseType,kUpperCaseSmallCapsSelector);y(n)}}(t)});var U=m({text:"Upper Case",frame:NSMakeRect(0,0,66,14),alignment:NSTextAlignmentCenter,fontSize:11}),j=NSStackView.stackViewWithViews([x,U]);j.setOrientation(NSUserInterfaceLayoutOrientationVertical),j.setSpacing(4),j.setTranslatesAutoresizingMaskIntoConstraints(!1);var H=NSStackView.stackViewWithViews([B,P,j]);H.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),H.setAlignment(NSLayoutAttributeFirstBaseline),H.setSpacing(4),H.setTranslatesAutoresizingMaskIntoConstraints(!1);var K=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,284,36));K.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),K.setAlignment(NSLayoutAttributeFirstBaseline),K.setSpacing(4),K.setViews_inGravity([F,H],NSStackViewGravityLeading);var q=NSStackView.stackViewWithViews([r,h,w,K]);q.setOrientation(NSUserInterfaceLayoutOrientationVertical),q.setAlignment(NSLayoutAttributeLeading),q.setSpacing(8),q.setTranslatesAutoresizingMaskIntoConstraints(!1),n.contentView().addSubview(q),n.contentView().setFlipped(!0),N(q,n.contentView(),[16,16,8,16]),t[e]=n,n.standardWindowButton(NSWindowCloseButton).setCOSJSTargetFunction(function(i){n.close(),t.removeObjectForKey(e),t.panelOpen=!1,COScript.currentCOScript().setShouldKeepAround_(!1)})}(t,r)}(),function(){var t=COScript.currentCOScript().env().scriptURL.path().stringByDeletingLastPathComponent().stringByDeletingLastPathComponent().stringByDeletingLastPathComponent().stringByDeletingLastPathComponent()+"/src",e=e||log;!function(){var e=Mocha.sharedRuntime(),n=t;!!e.valueForKey("HelloSketch")||!!e.loadFrameworkWithName_inDirectory("HelloSketch",n)&&e.setValue_forKey_(!0,"HelloSketch")}()}(),framework("CoreText"),k()}},sketch:
/*!*************************!*\
  !*** external "sketch" ***!
  \*************************/
/*! no static exports found */function(t,e){t.exports=require("sketch")}});"default"===t&&"function"==typeof n?n(e):n[t](e)}that.onRun=__skpm_run.bind(this,"default"),that.selectionChanged=__skpm_run.bind(this,"selectionChanged");