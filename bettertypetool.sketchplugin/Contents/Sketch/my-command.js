var globalThis=this;function __skpm_run(t,e){globalThis.context=e;var i=function(t){var e={};function i(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e){t.exports=require("sketch")},function(t,e,i){"use strict";i.r(e),i.d(e,"shutdown",function(){return g}),i.d(e,"selectionChanged",function(){return h}),i.d(e,"textChanged",function(){return C});var a=i(0),n=i.n(a);COScript.currentCOScript().setShouldKeepAround_(!0);var r="com.betterTypePanel",o="com.betterTypePanel.panel",s="com.betterTypePanel.popupButton.verticalPosition",l="com.betterTypePanel.radioButton.proportional",S="com.betterTypePanel.radioButton.monospaced",u="com.betterTypePanel.button.lowerCase",c="com.betterTypePanel.button.upperCase",d="com.betterTypePanel.radioButton.liningFigures",f="com.betterTypePanel.radioButton.oldStyle",m="com.betterTypePanel.popupButton.sfSymbolSize",p="com.betterTypePanel.row.sfSymbolSize",N="com.betterTypePanel.vibrancy",b=312,y=210;function g(){HSMain.alloc().init().stopObservingTextViewSelectionChanges()}function h(t){framework("CoreText"),NSThread.mainThread().threadDictionary()[r]&&L()}function C(){if(framework("CoreText"),NSThread.mainThread().threadDictionary()[r]){L(!0)}}function T(t,e,i){t.setTranslatesAutoresizingMaskIntoConstraints(!1),v(NSLayoutAttributeTop,t,e,i[0]),v(NSLayoutAttributeTrailing,t,e,i[1]),v(NSLayoutAttributeBottom,t,e,i[2]),v(NSLayoutAttributeLeading,t,e,i[3])}function v(t,e,i,a){i.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(e,t,NSLayoutRelationEqual,i,t,1,a))}function k(t){var e=t.text,i=t.frame,a=t.alignment,n=t.fontSize,r=void 0===n?13:n,o=NSTextField.alloc().initWithFrame(i);return o.setStringValue(e),o.setAlignment(a),o.setFont(NSFont.systemFontOfSize(r)),o.setBezeled(!1),o.setDrawsBackground(!1),o.setEditable(!1),o.setSelectable(!1),o}function O(t){var e=n.a.getSelectedDocument();e.selectedLayers.layers.filter(function(t){return"Text"==t.type}).forEach(function(e){var i=e.sketchObject.font(),a=i.pointSize(),n=(i.fontDescriptor().fontAttributes()[NSFontFeatureSettingsAttribute],i.fontDescriptor().fontDescriptorByAddingAttributes(t)),r=NSFont.fontWithDescriptor_size(n,a);if(e.sketchObject.setFont(r),1==e.sketchObject.isEditingText()){var o=e.sketchObject.editingDelegate().textView(),s=o.textStorage();V(e).forEach(function(e){var i=e.font,a=e.range,n=i.pointSize(),r=i.fontDescriptor().fontDescriptorByAddingAttributes(t),o=NSFont.fontWithDescriptor_size(r,n),l=NSDictionary.dictionaryWithObject_forKey(o,NSFontAttributeName);s.addAttributes_range(l,a)}),o.didChangeText()}}),e.sketchObject.inspectorController().reload()}function A(t,e){var i=NSFont.boldSystemFontOfSize(13),a=_(t,e),n=(i.fontDescriptor().fontAttributes()[NSFontFeatureSettingsAttribute],i.fontDescriptor().fontDescriptorByAddingAttributes(a));return NSFont.fontWithDescriptor_size(n,13)}function _(t,e){return{[NSFontFeatureSettingsAttribute]:[{[NSFontFeatureTypeIdentifierKey]:t,[NSFontFeatureSelectorIdentifierKey]:e}]}}function L(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=n.a.getSelectedDocument().selectedLayers.layers,i=NSThread.mainThread().threadDictionary(),a=i[N];if(null==e)return W(i),void(a.isHidden()||(a.layer().setBackgroundFilters([]),a.setHidden(!0)));var r=e.filter(function(t){return"Text"==t.type});if(0==r.length)return W(i),void(a.isHidden()||(a.layer().setBackgroundFilters([]),a.setHidden(!0)));var b=[];r.forEach(function(e){V(e,t).forEach(function(t){var e,i,a,n,r,s,l,S,u;e=t.font,i=e.familyName(),a=!1,n=NSThread.mainThread().threadDictionary(),r=n[p],s=n[o],l=s.frame().origin.x,S=s.frame().origin.y,s.frame().size.height,u=s.frame().size.height,["SF Pro Text","SF Pro Rounded","SF Pro Display","SF Compact Text","SF Compact Rounded","SF Compact Display"].forEach(function(t){if(i==t)return a=!0,void(235!=u&&(s.setFrame_display_animate(NSMakeRect(l,S-25,312,235),!0,!0),r.setHidden(!1)))}),a||210!=u&&(r.setHidden(!0),s.setFrame_display_animate(NSMakeRect(l,S+25,312,210),!0,!0));var c=function(t){var e={verticalPosition:"default",numberSpacing:"proportional",numberCase:"lining",smallCapsLowerCase:!1,smallCapsUpperCase:!1,sfSymbolSize:"medium"};(function(t){framework("CoreText");var e=HSMain.alloc().init(),i=CTFontCreateWithName(t.fontName(),t.pointSize(),null),a=CTFontCopyFeatures(i),n=function(t){var e=[];if(t){var i=[];t.forEach(function(t){i.push(Number(t.CTFeatureTypeIdentifier))}),i.includes(10)||e.push("verticalPosition"),i.includes(6)||e.push("numberSpacing"),i.includes(21)||e.push("numberCase"),i.includes(37)||e.push("smallCapsLowerCase"),i.includes(38)||e.push("smallCapsUpperCase")}else e.push("verticalPosition","numberSpacing","numberCase","smallCapsLowerCase","smallCapsUpperCase");return e}(e.bridgeArray(a)),r=t.familyName().toLowerCase().trim();["sf pro text","sf pro rounded","sf pro display","sf compact text","sf compact rounded","sf compact display"].includes(r)||n.push("sfSymbolSize");return n})(t).forEach(function(t){switch(t){case"verticalPosition":e.verticalPosition="disabled";break;case"numberSpacing":e.numberSpacing="disabled";break;case"numberCase":e.numberCase="disabled";break;case"smallCapsLowerCase":e.smallCapsLowerCase="disabled";break;case"smallCapsUpperCase":e.smallCapsUpperCase="disabled";break;case"sfSymbolSize":e.sfSymbolSize="disabled"}});var i=t.fontDescriptor().fontAttributes()[NSFontFeatureSettingsAttribute];i&&i.forEach(function(t){var i=Number(t[NSFontFeatureTypeIdentifierKey]),a=Number(t[NSFontFeatureSelectorIdentifierKey]);switch(i){case 10:switch(a){case 0:e.verticalPosition="default";break;case 1:e.verticalPosition="superscript";break;case 2:e.verticalPosition="subscript";break;case 3:e.verticalPosition="ordinals";break;case 4:e.verticalPosition="scientific inferiors"}break;case 6:switch(a){case 0:e.numberSpacing="monospaced";break;case 1:e.numberSpacing="proportional"}break;case 21:switch(a){case 0:e.numberCase="oldStyle";break;case 1:e.numberCase="lining"}break;case 37:switch(a){case 0:e.smallCapsLowerCase=!1;break;case 1:e.smallCapsLowerCase=!0}break;case 38:switch(a){case 0:e.smallCapsUpperCase=!1;break;case 1:e.smallCapsUpperCase=!0}break;case 35:switch(a){case 30:e.sfSymbolSize="small";break;case 31:break;case 32:e.sfSymbolSize="large"}}});return e}(t.font);b.push(c)})});var y={smallCapsLowerCase:[],smallCapsUpperCase:[],sfSymbolSize:[],numberCase:[],verticalPosition:[],numberSpacing:[]};for(var g in b.forEach(function(t){Object.keys(t).forEach(function(e){y[e].push(t[e])})}),y)y[g]=y[g].filter(h);function h(t,e,i){return i.indexOf(t)===e}var C,T=!0;for(var v in y){if(y[v].length>1){T=!1;break}if("disabled"!==y[v][0]){T=!1;break}}for(var k in T&&a.isHidden()?(a.setHidden(!1),a.layer().setBackgroundFilters([(C=CIFilter.filterWithName("CIGaussianBlur"),C.setDefaults(),C.setValue_forKey(2,"inputRadius"),C.setName("blur"),C)])):T||a.isHidden()?T&&a.isHidden():(a.layer().setBackgroundFilters([]),a.setHidden(!0)),y)if("verticalPosition"==k)!function(){var t=i[s];t.setEnabled(!0),F(),y[k].length>1?(t.selectItemWithTitle("Multiple"),y[k].forEach(function(e){"default"==e?t.itemWithTitle("Default Position").setState(NSControlStateValueMixed):"superscript"==e?t.itemWithTitle("Superscript").setState(NSControlStateValueMixed):"subscript"==e?t.itemWithTitle("Subscript").setState(NSControlStateValueMixed):"ordinals"==e?t.itemWithTitle("Ordinals").setState(NSControlStateValueMixed):"scientific inferiors"==e&&t.itemWithTitle("Scientific Notation").setState(NSControlStateValueMixed)})):"default"==y[k][0]?(t.selectItemWithTitle("Default Position"),t.itemWithTitle("Default Position").setState(NSControlStateValueOn)):"superscript"==y[k][0]?(t.selectItemWithTitle("Superscript"),t.itemWithTitle("Superscript").setState(NSControlStateValueOn)):"subscript"==y[k][0]?(t.selectItemWithTitle("Subscript"),t.itemWithTitle("Subscript").setState(NSControlStateValueOn)):"ordinals"==y[k][0]?(t.selectItemWithTitle("Ordinals"),t.itemWithTitle("Ordinals").setState(NSControlStateValueOn)):"scientific inferiors"==y[k][0]?(t.selectItemWithTitle("Scientific Notation"),t.itemWithTitle("Scientific Notation").setState(NSControlStateValueOn)):"disabled"==y[k][0]&&t.setEnabled(!1)}();else if("numberSpacing"==k){var O=i[l],A=i[S];O.setEnabled(!0),A.setEnabled(!0),y[k].length>1?(O.setState(NSOffState),A.setState(NSOffState)):"proportional"==y[k][0]?(O.setState(NSOnState),A.setState(NSOffState)):"monospaced"==y[k][0]?(O.setState(NSOffState),A.setState(NSOnState)):"disabled"==y[k][0]&&(O.setState(NSOffState),A.setState(NSOffState),O.setEnabled(!1),A.setEnabled(!1))}else if("numberCase"==k){var _=i[d],L=i[f];_.setEnabled(!0),L.setEnabled(!0),y[k].length>1?(_.setState(NSOffState),L.setState(NSOffState)):"lining"==y[k][0]?(_.setState(NSOnState),L.setState(NSOffState)):"oldStyle"==y[k][0]?(_.setState(NSOffState),L.setState(NSOnState)):"disabled"==y[k][0]&&(_.setState(NSOffState),L.setState(NSOffState),_.setEnabled(!1),L.setEnabled(!1))}else if("smallCapsUpperCase"==k){var w=i[c];w.setEnabled(!0),y[k].length>1?w.setState(NSOffState):0==y[k][0]?w.setState(NSOffState):1==y[k][0]?w.setState(NSOnState):"disabled"==y[k][0]&&(w.setState(NSOffState),w.setEnabled(!1))}else if("smallCapsLowerCase"==k){var x=i[u];x.setEnabled(!0),y[k].length>1?x.setState(NSOffState):0==y[k][0]?x.setState(NSOffState):1==y[k][0]?x.setState(NSOnState):"disabled"==y[k][0]&&(x.setState(NSOffState),x.setEnabled(!1))}else"sfSymbolSize"==k?function(){var t=i[m];t.setEnabled(!0),M(),y[k].length>1?(t.selectItemWithTitle("Multiple"),y[k].forEach(function(e){"small"==e?t.itemWithTitle("Small").setState(NSControlStateValueMixed):"medium"==e?t.itemWithTitle("Medium").setState(NSControlStateValueMixed):"large"==e&&t.itemWithTitle("Large").setState(NSControlStateValueMixed)})):"small"==y[k][0]?(t.selectItemWithTitle("Small"),t.itemWithTitle("Small").setState(NSControlStateValueOn)):"medium"==y[k][0]?(t.selectItemWithTitle("Medium"),t.itemWithTitle("Medium").setState(NSControlStateValueOn)):"large"==y[k][0]?(t.selectItemWithTitle("Large"),t.itemWithTitle("Large").setState(NSControlStateValueOn)):"disabled"==y[k][0]&&t.setEnabled(!1)}():y[k]}function W(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["all"];(e.includes("all")||e.includes("verticalPosition"))&&t[s].setEnabled(!1);if(e.includes("all")||e.includes("numberSpacing")){var i=t[l],a=t[S];i.setEnabled(!1),a.setEnabled(!1)}if(e.includes("all")||e.includes("numberCase")){var n=t[d],r=t[f];n.setEnabled(!1),r.setEnabled(!1)}(e.includes("all")||e.includes("smallCapsUpperCase"))&&t[c].setEnabled(!1);(e.includes("all")||e.includes("smallCapsLowerCase"))&&t[u].setEnabled(!1);(e.includes("all")||e.includes("sfSymbolSize"))&&t[m].setEnabled(!1)}function w(t,e,i){t.close(),HSMain.alloc().init().stopObservingTextViewSelectionChanges(),e.removeObjectForKey(i),e.panelOpen=!1,COScript.currentCOScript().setShouldKeepAround_(!1)}function F(){var t=NSThread.mainThread().threadDictionary()[s];t.itemWithTitle("Default Position").setState(NSControlStateValueOff),t.itemWithTitle("Superscript").setState(NSControlStateValueOff),t.itemWithTitle("Subscript").setState(NSControlStateValueOff),t.itemWithTitle("Ordinals").setState(NSControlStateValueOff),t.itemWithTitle("Scientific Notation").setState(NSControlStateValueOff)}function M(){var t=NSThread.mainThread().threadDictionary()[m];t.itemWithTitle("Small").setState(NSControlStateValueOff),t.itemWithTitle("Medium").setState(NSControlStateValueOff),t.itemWithTitle("Large").setState(NSControlStateValueOff)}function V(t){var e,i,a,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.sketchObject,o=MOPointer.alloc().init(),s=!0;try{a=r.editingDelegate().textView()}catch(f){s=!1}if(s){var l=a.textStorage();i=a.selectedRange(),e=l,n&&(i=NSMakeRange(0,t.text.length))}else{var S=r.attributedStringValue();i=NSMakeRange(0,t.text.length),e=S}var u=[];if(0==i.length){var c=e.attribute_atIndex_longestEffectiveRange_inRange(NSFontAttributeName,i.location,o,i);u.push({font:c,range:o.value()})}for(;i.length>0;){var d=e.attribute_atIndex_longestEffectiveRange_inRange(NSFontAttributeName,i.location,o,i);i=NSMakeRange(NSMaxRange(o.value()),NSMaxRange(i)-NSMaxRange(o.value())),u.push({font:d,range:o.value()})}return u}e.default=function(){var t,e,i,a,n;(t=NSThread.mainThread().threadDictionary())[r]?w(t[r],t,r):(t.panelOpen=!0,function(t,e){var i=NSPanel.alloc().init();i.setFrame_display(NSMakeRect(0,0,b,y),!0),i.setStyleMask(NSTexturedBackgroundWindowMask|NSTitledWindowMask|NSClosableWindowMask),i.title="BetterTypePanel",i.center(),i.makeKeyAndOrderFront(null),i.setLevel(NSFloatingWindowLevel),i.standardWindowButton(NSWindowMiniaturizeButton).setHidden(!0),i.standardWindowButton(NSWindowZoomButton).setHidden(!0),t[o]=i;var a=k({text:"Number Position:",frame:NSMakeRect(0,0,109,17),alignment:NSTextAlignmentRight});a.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(a,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,109));var n=NSPopUpButton.alloc().initWithFrame(NSMakeRect(0,0,150,25));n.addItemsWithTitles(["Default Position","Superscript","Subscript","Ordinals","Scientific Notation","Multiple"]),t[s]=n,n.itemWithTitle("Multiple").setHidden(!0),n.setCOSJSTargetFunction(function(t){return function(t){if("Superscript"==t.title()){var e=_(kVerticalPositionType,kSuperiorsSelector);O(e)}else if("Subscript"==t.title()){var i=_(kVerticalPositionType,kInferiorsSelector);O(i)}else if("Ordinals"==t.title()){var a=_(kVerticalPositionType,kOrdinalsSelector);O(a)}else if("Scientific Notation"==t.title()){var n=_(kVerticalPositionType,kScientificInferiorsSelector);O(n)}else{var r=_(kVerticalPositionType,kNormalPositionSelector);O(r)}}(t)});var r=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,284,25));r.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),r.setAlignment(NSLayoutAttributeFirstBaseline),r.setSpacing(4),r.setViews_inGravity([a,n],NSStackViewGravityLeading);var g=k({text:"Number Spacing:",frame:NSMakeRect(0,0,109,17),alignment:NSTextAlignmentRight});g.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(g,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,109));var h=NSButton.alloc().initWithFrame(NSMakeRect(0,0,97,18));h.setButtonType(NSRadioButton),h.setTitle("Proportional"),h.setState(NSOnState),t[l]=h;var C=NSButton.alloc().initWithFrame(NSMakeRect(0,0,150,18));C.setButtonType(NSRadioButton),C.setTitle("Monospaced/Tabular"),C.setState(NSOffState),t[S]=C;var L=function(t){if("Proportional"==t.title()){var e=_(kNumberSpacingType,kProportionalNumbersSelector);O(e)}else{var i=_(kNumberSpacingType,kMonospacedNumbersSelector);O(i)}};h.setCOSJSTargetFunction(function(t){return L(t)}),C.setCOSJSTargetFunction(function(t){return L(t)});var W=NSStackView.stackViewWithViews([h,C]);W.setOrientation(NSUserInterfaceLayoutOrientationVertical),W.setAlignment(NSLayoutAttributeLeading),W.setSpacing(4),W.setTranslatesAutoresizingMaskIntoConstraints(!1);var F=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,284,36));F.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),F.setAlignment(NSLayoutAttributeFirstBaseline),F.setSpacing(4),F.setViews_inGravity([g,W],NSStackViewGravityLeading);var M=k({text:"Number Case:",frame:NSMakeRect(0,0,109,17),alignment:NSTextAlignmentRight});M.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(M,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,109));var V=NSButton.alloc().initWithFrame(NSMakeRect(0,0,104,17));V.setButtonType(NSRadioButton),V.setTitle("Lining figures"),V.setState(NSOnState),t[d]=V;var x=NSButton.alloc().initWithFrame(NSMakeRect(0,0,124,18));x.setButtonType(NSRadioButton),x.setTitle("Old-style figures"),x.setState(NSOffState),t[f]=x;var B=function(t){if("Old-style figures"==t.title()){var e=_(kNumberCaseType,kLowerCaseNumbersSelector);O(e)}else{var i=_(kNumberCaseType,kUpperCaseNumbersSelector);O(i)}};V.setCOSJSTargetFunction(function(t){return B(t)}),x.setCOSJSTargetFunction(function(t){return B(t)});var R=NSStackView.stackViewWithViews([V,x]);R.setOrientation(NSUserInterfaceLayoutOrientationVertical),R.setAlignment(NSLayoutAttributeLeading),R.setSpacing(4),R.setTranslatesAutoresizingMaskIntoConstraints(!1);var I=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,284,36));I.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),I.setAlignment(NSLayoutAttributeFirstBaseline),I.setSpacing(4),I.setViews_inGravity([M,R],NSStackViewGravityLeading);var P=k({text:"Small Caps:",frame:NSMakeRect(0,0,109,17),alignment:NSTextAlignmentRight});P.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(P,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,109));var E=k({text:"Tt →",frame:NSMakeRect(0,0,32,17),alignment:NSTextAlignmentLeft}),z=NSButton.alloc().initWithFrame(NSMakeRect(0,0,72,32));z.setButtonType(NSButtonTypeOnOff),z.setBezelStyle(NSRoundedBezelStyle);var D=NSMutableAttributedString.new().initWithString("Tt"),H=NSMakeRange(1,1),U=A(37,1);D.setAlignment_range(NSTextAlignmentCenter,NSMakeRange(0,2)),D.addAttribute_value_range(NSFontAttributeName,U,H),z.setAttributedTitle(D),z.setState(NSOffState),z.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(z,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,60)),t[u]=z,z.setCOSJSTargetFunction(function(t){return function(t){if(0==t.state()){var e=_(kLowerCaseType,kDefaultLowerCaseSelector);O(e)}else{var i=_(kLowerCaseType,kLowerCaseSmallCapsSelector);O(i)}}(t)});var j=k({text:"Lower Case",frame:NSMakeRect(0,0,65,14),alignment:NSTextAlignmentCenter,fontSize:11}),K=NSStackView.stackViewWithViews([z,j]);K.setOrientation(NSUserInterfaceLayoutOrientationVertical),K.setAlignment(NSLayoutAttributeCenterX),K.setSpacing(4),K.setTranslatesAutoresizingMaskIntoConstraints(!1);var G=NSButton.alloc().initWithFrame(NSMakeRect(0,0,72,32));G.setButtonType(NSButtonTypeOnOff),G.setBezelStyle(NSRoundedBezelStyle);var q=NSMutableAttributedString.new().initWithString("Tt"),J=NSMakeRange(0,1),X=A(38,1);q.setAlignment_range(NSTextAlignmentCenter,NSMakeRange(0,2)),NSMutableParagraphStyle.new().init().setAlignment(NSTextAlignmentCenter),q.addAttribute_value_range(NSFontAttributeName,X,J),G.setAttributedTitle(q),G.setState(NSOffState),G.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(G,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,60)),t[c]=G,G.setCOSJSTargetFunction(function(t){return function(t){if(0==t.state()){var e=_(kUpperCaseType,kDefaultUpperCaseSelector);O(e)}else{var i=_(kUpperCaseType,kUpperCaseSmallCapsSelector);O(i)}}(t)});var Z=k({text:"Upper Case",frame:NSMakeRect(0,0,66,14),alignment:NSTextAlignmentCenter,fontSize:11}),Q=NSStackView.stackViewWithViews([G,Z]);Q.setOrientation(NSUserInterfaceLayoutOrientationVertical),Q.setSpacing(4),Q.setTranslatesAutoresizingMaskIntoConstraints(!1);var Y=NSStackView.stackViewWithViews([E,K,Q]);Y.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),Y.setAlignment(NSLayoutAttributeFirstBaseline),Y.setSpacing(4),Y.setTranslatesAutoresizingMaskIntoConstraints(!1);var $=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,284,36));$.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),$.setAlignment(NSLayoutAttributeFirstBaseline),$.setSpacing(4),$.setViews_inGravity([P,Y],NSStackViewGravityLeading);var tt=k({text:"SF Symbol Size:",frame:NSMakeRect(0,0,109,17),alignment:NSTextAlignmentRight});tt.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(tt,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,109));var et=NSPopUpButton.alloc().initWithFrame(NSMakeRect(0,0,150,25));et.addItemsWithTitles(["Small","Medium","Large","Multiple"]),t[m]=et,et.itemWithTitle("Multiple").setHidden(!0),et.setCOSJSTargetFunction(function(t){return function(t){if("Small"==t.title()){var e=_(kStylisticAlternativesType,kStylisticAltFifteenOnSelector),i=_(kStylisticAlternativesType,kStylisticAltSixteenOffSelector),a=[e,i];a.forEach(function(t){O(t)})}else if("Medium"==t.title()){var n=_(kStylisticAlternativesType,kStylisticAltFifteenOffSelector),r=_(kStylisticAlternativesType,kStylisticAltSixteenOffSelector),o=[n,r];o.forEach(function(t){O(t)})}else if("Large"==t.title()){var s=_(kStylisticAlternativesType,kStylisticAltFifteenOffSelector),l=_(kStylisticAlternativesType,kStylisticAltSixteenOnSelector),S=[s,l];S.forEach(function(t){O(t)})}}(t)});var it=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,284,25));it.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),it.setAlignment(NSLayoutAttributeFirstBaseline),it.setSpacing(4),it.setViews_inGravity([tt,et],NSStackViewGravityLeading),t[p]=it,it.setHidden(!0);var at=NSStackView.stackViewWithViews([r,F,I,$,it]);at.setOrientation(NSUserInterfaceLayoutOrientationVertical),at.setAlignment(NSLayoutAttributeLeading),at.setSpacing(8),at.setTranslatesAutoresizingMaskIntoConstraints(!1),i.contentView().addSubview(at),i.contentView().setFlipped(!0),T(at,i.contentView(),[16,16,8,16]),function(t){var e=NSView.alloc().initWithFrame(NSMakeRect(0,0,b,y));e.setBackgroundColor(NSColor.colorWithRed_green_blue_alpha(0,0,0,.6)),e.setWantsLayer(!0),t.addSubview(e),T(e,t,[0,0,0,0]);var i=k({text:"Selected text doesn't contain any supported font features. Please try a different typeface.",frame:NSMakeRect(0,0,b,17),alignment:NSTextAlignmentCenter,fontSize:12});i.setTextColor(NSColor.whiteColor()),e.addSubview(i),i.setTranslatesAutoresizingMaskIntoConstraints(!1),v(NSLayoutAttributeCenterX,i,e,0),v(NSLayoutAttributeTop,i,e,40),i.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(i,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,260)),e.setHidden(!0),NSThread.mainThread().threadDictionary()[N]=e}(i.contentView()),t[e]=i,i.standardWindowButton(NSWindowCloseButton).setCOSJSTargetFunction(function(a){w(i,t,e)})}(t,r)),e=COScript.currentCOScript().env().scriptURL.path().stringByDeletingLastPathComponent().stringByDeletingLastPathComponent().stringByDeletingLastPathComponent().stringByDeletingLastPathComponent()+"/src",i=i||log,a=Mocha.sharedRuntime(),n=e,a.valueForKey("HelloSketch")||a.loadFrameworkWithName_inDirectory("HelloSketch",n)&&a.setValue_forKey_(!0,"HelloSketch"),framework("CoreText");var g=HSMain.alloc().init();g.beginObservingTextViewSelectionChanges(),g.setCallbackForTextViewSelectionChange(function(){L()}),L()}}]);"default"===t&&"function"==typeof i?i(e):i[t](e)}globalThis.onRun=__skpm_run.bind(this,"default"),globalThis.selectionChanged=__skpm_run.bind(this,"selectionChanged"),globalThis.textChanged=__skpm_run.bind(this,"textChanged");