var that=this;function __skpm_run(t,e){that.context=e;var n=function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="./src/my-command.js")}({"./src/my-command.js":
/*!***************************!*\
  !*** ./src/my-command.js ***!
  \***************************/
/*! exports provided: default, selectionChanged */function(t,e,n){"use strict";n.r(e),n.d(e,"selectionChanged",function(){return p});var i=n(/*! sketch */"sketch"),a=n.n(i);COScript.currentCOScript().setShouldKeepAround_(!0);var r="com.betterTypePanel",o="com.betterTypePanel.popupButton.verticalPosition",s="com.betterTypePanel.radioButton.proportional",l="com.betterTypePanel.radioButton.monospaced",u="com.betterTypePanel.button.lowerCase",S="com.betterTypePanel.button.upperCase",c="com.betterTypePanel.radioButton.liningFigures",d="com.betterTypePanel.radioButton.oldStyle";function p(t){framework("CoreText"),NSThread.mainThread().threadDictionary()[r]&&k()}function N(t,e,n){t.setTranslatesAutoresizingMaskIntoConstraints(!1),f(NSLayoutAttributeTop,t,e,n[0]),f(NSLayoutAttributeTrailing,t,e,n[1]),f(NSLayoutAttributeBottom,t,e,n[2]),f(NSLayoutAttributeLeading,t,e,n[3])}function f(t,e,n,i){n.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(e,t,NSLayoutRelationEqual,n,t,1,i))}function m(t){var e=t.text,n=t.frame,i=t.alignment,a=t.fontSize,r=void 0===a?13:a,o=NSTextField.alloc().initWithFrame(n);return o.setStringValue(e),o.setAlignment(i),o.setFont(NSFont.systemFontOfSize(r)),o.setBezeled(!1),o.setDrawsBackground(!1),o.setEditable(!1),o.setSelectable(!1),o}function y(t){var e=a.a.getSelectedDocument(),n=e.selectedLayers.layers[0],i=n.sketchObject.font(),r=i.pointSize(),o=(i.fontDescriptor().fontAttributes()[NSFontFeatureSettingsAttribute],i.fontDescriptor().fontDescriptorByAddingAttributes(t)),s=NSFont.fontWithDescriptor_size(o,r);if(1==n.sketchObject.isEditingText()){console.log("In Edit Mode");var l=n.sketchObject.editingDelegate().textStorage();l.beginEditing(),l.setAttributes_range(t,NSMakeRange(0,5)),l.endEditing()}else n.sketchObject.setFont(s);e.sketchObject.inspectorController().reload()}function b(t,e){var n=NSFont.boldSystemFontOfSize(13),i=g(t,e),a=(n.fontDescriptor().fontAttributes()[NSFontFeatureSettingsAttribute],n.fontDescriptor().fontDescriptorByAddingAttributes(i));return NSFont.fontWithDescriptor_size(a,13)}function g(t,e){return{[NSFontFeatureSettingsAttribute]:[{[NSFontFeatureTypeIdentifierKey]:t,[NSFontFeatureSelectorIdentifierKey]:e}]}}function k(){var t=a.a.getSelectedDocument().selectedLayers.layers[0],e=NSThread.mainThread().threadDictionary();if(t){var n,i=t.sketchObject.font(),r=(i.pointSize(),i.fontDescriptor().fontAttributes()[NSFontFeatureSettingsAttribute]),p={verticalPosition:"default",numberSpacing:"proportional",numberCase:"lining",smallCapsLowerCase:!1,smallCapsUpperCase:!1};for(var N in n=r?function(t,e){return t.forEach(function(t){var n=t[NSFontFeatureTypeIdentifierKey],i=t[NSFontFeatureSelectorIdentifierKey];10==n&&(0==i?e.verticalPosition="default":1==i?e.verticalPosition="superscript":2==i?e.verticalPosition="subscript":3==i?e.verticalPosition="ordinals":4==i&&(e.verticalPosition="scientific inferiors")),6==n&&(0==i?e.numberSpacing="monospaced":1==i&&(e.numberSpacing="proportional")),21==n&&(0==i?e.numberCase="oldStyle":1==i&&(e.numberCase="lining")),37==n&&(0==i?e.smallCapsLowerCase=!1:1==i&&(e.smallCapsLowerCase=!0)),38==n&&(0==i?e.smallCapsUpperCase=!1:1==i&&(e.smallCapsUpperCase=!0))}),e}(r,p):p)if("verticalPosition"==N){var f=e[o];f.setEnabled(!0),"default"==n[N]?f.selectItemWithTitle("Default Position"):"superscript"==n[N]?f.selectItemWithTitle("Superscript"):"subscript"==n[N]?f.selectItemWithTitle("Subscript"):"ordinals"==n[N]?f.selectItemWithTitle("Ordinals"):"scientific inferiors"==n[N]&&f.selectItemWithTitle("Scientific Notation")}else if("numberSpacing"==N){var m=e[s],y=e[l];m.setEnabled(!0),y.setEnabled(!0),"proportional"==n[N]?(m.setState(NSOnState),y.setState(NSOffState)):"monospaced"==n[N]&&(m.setState(NSOffState),y.setState(NSOnState))}else if("numberCase"==N){var b=e[c],g=e[d];b.setEnabled(!0),g.setEnabled(!0),"lining"==n[N]?(b.setState(NSOnState),g.setState(NSOffState)):"oldStyle"==n[N]&&(b.setState(NSOffState),g.setState(NSOnState))}else if("smallCapsUpperCase"==N){var k=e[S];k.setEnabled(!0),0==n[N]?k.setState(NSOffState):1==n[N]&&k.setState(NSOnState)}else if("smallCapsLowerCase"==N){var v=e[u];v.setEnabled(!0),0==n[N]?v.setState(NSOffState):1==n[N]&&v.setState(NSOnState)}}else!function(t){t[o].setEnabled(!1);var e=t[s],n=t[l];e.setEnabled(!1),n.setEnabled(!1);var i=t[c],a=t[d];i.setEnabled(!1),a.setEnabled(!1),t[S].setEnabled(!1),t[u].setEnabled(!1)}(e)}function v(t,e,n){t.close(),e.removeObjectForKey(n),e.panelOpen=!1,COScript.currentCOScript().setShouldKeepAround_(!1)}e.default=function(){!function(){var t=NSThread.mainThread().threadDictionary();t[r]?v(t[r],t,r):(t.panelOpen=!0,function(t,e){var n=NSPanel.alloc().init();n.setFrame_display(NSMakeRect(0,0,312,210),!0),n.setStyleMask(NSTexturedBackgroundWindowMask|NSTitledWindowMask|NSClosableWindowMask),n.title="betterTypePanel",n.center(),n.makeKeyAndOrderFront(null),n.setLevel(NSFloatingWindowLevel),n.standardWindowButton(NSWindowMiniaturizeButton).setHidden(!0),n.standardWindowButton(NSWindowZoomButton).setHidden(!0);var i=m({text:"Vertical Position:",frame:NSMakeRect(0,0,109,17),alignment:NSTextAlignmentRight});i.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(i,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,109));var a=NSPopUpButton.alloc().initWithFrame(NSMakeRect(0,0,150,25));a.addItemsWithTitles(["Default Position","Superscript","Subscript","Ordinals","Scientific Notation"]),t[o]=a;a.setCOSJSTargetFunction(function(t){return function(t){if("Superscript"==t.title()){var e=g(kVerticalPositionType,kSuperiorsSelector);y(e)}else if("Subscript"==t.title()){var n=g(kVerticalPositionType,kInferiorsSelector);y(n)}else if("Ordinals"==t.title()){var i=g(kVerticalPositionType,kOrdinalsSelector);y(i)}else if("Scientific Notation"==t.title()){var a=g(kVerticalPositionType,kOrdinalsSelector);y(a)}else{var r=g(kVerticalPositionType,kNormalPositionSelector);y(r)}}(t)});var r=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,284,25));r.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),r.setAlignment(NSLayoutAttributeFirstBaseline),r.setSpacing(4),r.setViews_inGravity([i,a],NSStackViewGravityLeading);var p=m({text:"Number Spacing:",frame:NSMakeRect(0,0,109,17),alignment:NSTextAlignmentRight});p.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(p,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,109));var f=NSButton.alloc().initWithFrame(NSMakeRect(0,0,97,18));f.setButtonType(NSRadioButton),f.setTitle("Proportional"),f.setState(NSOnState),t[s]=f;var k=NSButton.alloc().initWithFrame(NSMakeRect(0,0,150,18));k.setButtonType(NSRadioButton),k.setTitle("Monospaced/Tabular"),k.setState(NSOffState),t[l]=k;var C=function(t){if("Proportional"==t.title()){var e=g(kNumberSpacingType,kProportionalNumbersSelector);y(e)}else{var n=g(kNumberSpacingType,kMonospacedNumbersSelector);y(n)}};f.setCOSJSTargetFunction(function(t){return C(t)}),k.setCOSJSTargetFunction(function(t){return C(t)});var h=NSStackView.stackViewWithViews([f,k]);h.setOrientation(NSUserInterfaceLayoutOrientationVertical),h.setAlignment(NSLayoutAttributeLeading),h.setSpacing(4),h.setTranslatesAutoresizingMaskIntoConstraints(!1);var A=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,284,36));A.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),A.setAlignment(NSLayoutAttributeFirstBaseline),A.setSpacing(4),A.setViews_inGravity([p,h],NSStackViewGravityLeading);var T=m({text:"Number Case:",frame:NSMakeRect(0,0,109,17),alignment:NSTextAlignmentRight});T.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(T,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,109));var O=NSButton.alloc().initWithFrame(NSMakeRect(0,0,104,17));O.setButtonType(NSRadioButton),O.setTitle("Lining figures"),O.setState(NSOnState),t[c]=O;var L=NSButton.alloc().initWithFrame(NSMakeRect(0,0,124,18));L.setButtonType(NSRadioButton),L.setTitle("Old-style figures"),L.setState(NSOffState),t[d]=L;var _=function(t){if("Old-style figures"==t.title()){var e=g(kNumberCaseType,kLowerCaseNumbersSelector);y(e)}else{var n=g(kNumberCaseType,kUpperCaseNumbersSelector);y(n)}};O.setCOSJSTargetFunction(function(t){return _(t)}),L.setCOSJSTargetFunction(function(t){return _(t)});var w=NSStackView.stackViewWithViews([O,L]);w.setOrientation(NSUserInterfaceLayoutOrientationVertical),w.setAlignment(NSLayoutAttributeLeading),w.setSpacing(4),w.setTranslatesAutoresizingMaskIntoConstraints(!1);var F=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,284,36));F.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),F.setAlignment(NSLayoutAttributeFirstBaseline),F.setSpacing(4),F.setViews_inGravity([T,w],NSStackViewGravityLeading);var B=m({text:"Small Caps:",frame:NSMakeRect(0,0,109,17),alignment:NSTextAlignmentRight});B.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(B,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,109));var W=m({text:"Tt →",frame:NSMakeRect(0,0,32,17),alignment:NSTextAlignmentLeft}),V=NSButton.alloc().initWithFrame(NSMakeRect(0,0,72,32));V.setButtonType(NSButtonTypeOnOff),V.setBezelStyle(NSRoundedBezelStyle);var I=NSMutableAttributedString.new().initWithString("Tt"),M=NSMakeRange(1,1),R=b(37,1);I.addAttribute_value_range(NSFontAttributeName,R,M),I.fixAttributesInRange(M),V.setAttributedTitle(I),V.setState(NSOffState),V.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(V,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,60)),t[u]=V;V.setCOSJSTargetFunction(function(t){return function(t){if(0==t.state()){var e=g(kLowerCaseType,kDefaultLowerCaseSelector);y(e)}else{var n=g(kLowerCaseType,kLowerCaseSmallCapsSelector);y(n)}}(t)});var P=m({text:"Lower Case",frame:NSMakeRect(0,0,65,14),alignment:NSTextAlignmentCenter,fontSize:11}),x=NSStackView.stackViewWithViews([V,P]);x.setOrientation(NSUserInterfaceLayoutOrientationVertical),x.setAlignment(NSLayoutAttributeCenterX),x.setSpacing(4),x.setTranslatesAutoresizingMaskIntoConstraints(!1);var z=NSButton.alloc().initWithFrame(NSMakeRect(0,0,72,32));z.setButtonType(NSButtonTypeOnOff),z.setBezelStyle(NSRoundedBezelStyle);var E=NSMutableAttributedString.new().initWithString("Tt"),D=NSMakeRange(0,1),U=b(38,1);E.addAttribute_value_range(NSFontAttributeName,U,D),E.fixAttributesInRange(D),z.setAttributedTitle(E),z.setState(NSOffState),z.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(z,NSLayoutAttributeWidth,NSLayoutRelationEqual,nil,NSLayoutAttributeNotAnAttribute,1,60)),t[S]=z;z.setCOSJSTargetFunction(function(t){return function(t){if(0==t.state()){var e=g(kUpperCaseType,kDefaultUpperCaseSelector);y(e)}else{var n=g(kUpperCaseType,kUpperCaseSmallCapsSelector);y(n)}}(t)});var j=m({text:"Upper Case",frame:NSMakeRect(0,0,66,14),alignment:NSTextAlignmentCenter,fontSize:11}),H=NSStackView.stackViewWithViews([z,j]);H.setOrientation(NSUserInterfaceLayoutOrientationVertical),H.setSpacing(4),H.setTranslatesAutoresizingMaskIntoConstraints(!1);var K=NSStackView.stackViewWithViews([W,x,H]);K.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),K.setAlignment(NSLayoutAttributeFirstBaseline),K.setSpacing(4),K.setTranslatesAutoresizingMaskIntoConstraints(!1);var q=NSStackView.alloc().initWithFrame(NSMakeRect(0,0,284,36));q.setOrientation(NSUserInterfaceLayoutOrientationHorizontal),q.setAlignment(NSLayoutAttributeFirstBaseline),q.setSpacing(4),q.setViews_inGravity([B,K],NSStackViewGravityLeading);var G=NSStackView.stackViewWithViews([r,A,F,q]);G.setOrientation(NSUserInterfaceLayoutOrientationVertical),G.setAlignment(NSLayoutAttributeLeading),G.setSpacing(8),G.setTranslatesAutoresizingMaskIntoConstraints(!1),n.contentView().addSubview(G),n.contentView().setFlipped(!0),N(G,n.contentView(),[16,16,8,16]),t[e]=n,n.standardWindowButton(NSWindowCloseButton).setCOSJSTargetFunction(function(i){v(n,t,e)})}(t,r))}(),function(){var t=COScript.currentCOScript().env().scriptURL.path().stringByDeletingLastPathComponent().stringByDeletingLastPathComponent().stringByDeletingLastPathComponent().stringByDeletingLastPathComponent()+"/src",e=e||log;!function(){var e=Mocha.sharedRuntime(),n=t;!!e.valueForKey("HelloSketch")||!!e.loadFrameworkWithName_inDirectory("HelloSketch",n)&&e.setValue_forKey_(!0,"HelloSketch")}()}(),framework("CoreText"),k()}},sketch:
/*!*************************!*\
  !*** external "sketch" ***!
  \*************************/
/*! no static exports found */function(t,e){t.exports=require("sketch")}});"default"===t&&"function"==typeof n?n(e):n[t](e)}that.onRun=__skpm_run.bind(this,"default"),that.selectionChanged=__skpm_run.bind(this,"selectionChanged");